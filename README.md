# plog

## Overview

Plog is a suite of some scripts to be run on a UNIX server for handling
Markdown formatted blogs, glogs, and email newsletters with Git.

An example of the generated output can be found at my personal
[blog]( http://yargo.andropov.org/blog/list.html ) and
[glog]( gopher://sdf.org/1/users/yargo ) sites.

This is describing version 1.2 of the suite.

### Notes about the Gopher protocol

Please note that _most browsers_ are unfortunately _incapable_ of displaying
[Gopher]( http://gopherproject.org ) links!

There is a fine
[Public Gopher Proxy]( http://gopher.floodgap.com/gopher/ )
on [Floodgap]( http://www.floodgap.com ) for those crippled browsers.
Therefore, if the direct gopher link above does not work,
you may try to access it
[via proxy]( http://gopher.floodgap.com/gopher/gw.lite?sdf.org/1/users/yargo ).

If you are using Seamonkey or Firefox, you may try the "OverbiteFF" add-on
for Gopher functionality. Overbite also is available for Android, via gopherproject.org or Floodgap.

---

## Installation and Usage

_WORK IN PROGRESS_

### prerequisites

The plog suite mainly consists of the (sh/bash) shell scripts `pubnext.sh` and `allpub.sh`, and some configuration files and a suitable directory structure.

It makes use of the standard command line tools like `grep` and `sed` available on almost all Unix systems.

In addition, it needs `perl` (version 5.6) for Markdown-HTML conversion (and of course the corresponding script `mrkdwn.pl` included in the plog suite), and `lynx` for HTML-text conversion. _If there is sufficient interest, I may be motivated to enhance the scripts for graceful fallbacks to simple plain text processing -- just send me a note in that case!_

`git` is used to `git mv` the processed files to an archive directory; however, in case of failure, the scripts should gracefully switch to a simple `mv`.

The main scripts `pubnext.sh, mrkdwn.pl, allpub.sh` should
be installed in the same directory.

### customisation of scripts

The two shell scripts have some variables set at the
beginning, which should be configured to your needs.

They can be used for processing several collections of
postings through the run-time argument of the working
directory (see below). In case you need different
configuration, you can simply copy the scripts and use
different instances for different collections.

#### `pubnext.sh`

Here is the (current) standard configuration at the beginning
of `pubnext.sh`:

    subpref='[newsletter]' # prefix for mail subject
    tpref='t' # prefix for text file names
    adds='ad.txt' # address list for recipients
    webdir='' # directory to save result from HTML conversion
    gopherdir='' # directory to save result from text conversion
    draft='DRAFT' # mark for draft texts (must be at beginning of one line)
    arch='Archiv' # archive directory for processed texts
    htmlhead='<HTML><BODY>'
    htmlfoot="</BODY><!-- generated by $myself --></HTML>"

- `subpref` is a string prepended to e-mail subjects, like
  a flag for the recipients
- `tpref` is a string with the beginning of filenames to be
  considered as texts to be processed (e.g 'text', 'post',
  whatever) -- but make sure it does not match other files
  in the working directory, like the archive directory,
  address files, or log and temporary files!
- `adds` is a string with the name of the address file of
  the e-mail recipients
- `webdir` is a directory where files resulting from the
  Markdown-HTML conversion are stored, i.e blog files
- `gopherdir` is the analogue, for text files (gopher)
- `draft` contains the string that should mark draft texts
  which are not (yet) to be published; it is used as a
  `grep` pattern, so be careful with punctuation
- `arch` denotes a directory (must be writable of course)
  where postings (input text/Markdown files) are moved,
  after being processed and published
- `htmlhead` defines the string prepended to the files
  resulting from Markdown-HTML conversion
- `htmlfoot` is the analogue for the ending of these files

*Please note:*

- arguments for `tpref`, `adds`, `webdir`,
  `gopherdir` may be given to `pubnext.sh`,
  overriding the settings in the script
- all directories are *relative to the
  working directory* given as first (and
  mandatory) argument


#### `allpub.sh`

Here is the (current) standard configuration at the beginning
of `allpub.sh`:

    # pattern to look for files that may be processed:
    prefix='t'
    # list of e-mail addresses:
    adds='ad.txt'
    # directory to save text files for publication:
    pubtext="$HOME/plog/pubtext"
    # number of text files to be included in the index:
    lentext=24
    # name of index file for text:
    indtext='gophermap'
    # directory to save HTML/blog files for publication:
    pubhtml="$HOME/plog/pubhtml"
    # number of HTML files to be included in the index:
    lenhtml=12
    # name of index file for HTML/blog:
    indhtml='list.html'
    # name of RSS file (to be saved in $pubhtml):
    rsshtml='rss.xml'
    # base name of HTML/blog directory (from outside):
    rsslink='http://www.example.com/blog'

---

_2015-Jan-10 YB_

    # Copyright 2015 Yargo Bonetti
    #
    # This file is part of plog.
    # 
    # plog is free software: you can redistribute it and/or modify
    # it under the terms of the GNU General Public License as published by
    # the Free Software Foundation, either version 3 of the License, or
    # (at your option) any later version.
    # 
    # Foobar is distributed in the hope that it will be useful,
    # but WITHOUT ANY WARRANTY; without even the implied warranty of
    # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    # GNU General Public License for more details.
    # 
    # You should have received a copy of the GNU General Public License
    # along with plog.  If not, see <http://www.gnu.org/licenses/>.
